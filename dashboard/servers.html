<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Thrd Dashboard</title>
  <link rel="icon" type="image/x-icon" href="https://thrd.xyz/favicon.ico">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <!-- Inter font -->
  <link rel="preconnect" href="https://fonts.gstatic.com">
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">

  <!-- Font Awesome -->
  <script src="https://kit.fontawesome.com/YOUR_KIT_ID.js" crossorigin="anonymous"></script>

  <!-- Supabase -->
  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2/dist/supabase.min.js"></script>

  <style>
    /* Tailwind Production CSS (subset needed for this page) */
    html { font-family: 'Inter', sans-serif; line-height: 1.5; }
    body { margin: 0; min-height: 100vh; background-color: #1c1c1e; color: #e5e5ea; }
    a { text-decoration: none; }
    .flex { display: flex; }
    .flex-col { flex-direction: column; }
    .items-center { align-items: center; }
    .justify-between { justify-content: space-between; }
    .justify-end { justify-content: flex-end; }
    .min-h-screen { min-height: 100vh; }
    .p-4 { padding: 1rem; }
    .p-6 { padding: 1.5rem; }
    .p-8 { padding: 2rem; }
    .mb-4 { margin-bottom: 1rem; }
    .mb-6 { margin-bottom: 1.5rem; }
    .mb-8 { margin-bottom: 2rem; }
    .mt-4 { margin-top: 1rem; }
    .mt-6 { margin-top: 1.5rem; }
    .mt-8 { margin-top: 2rem; }
    .gap-2 { gap: 0.5rem; }
    .gap-6 { gap: 1.5rem; }
    .text-xl { font-size: 1.25rem; }
    .text-3xl { font-size: 1.875rem; }
    .text-gray-300 { color: #d1d1d6; }
    .text-gray-400 { color: #8e8e93; }
    .text-green-400 { color: #4ade80; }
    .text-red-400 { color: #f87171; }
    .font-bold { font-weight: 700; }
    .font-semibold { font-weight: 600; }
    .cursor-pointer { cursor: pointer; }
    .hidden { display: none; }
    .w-full { width: 100%; }
    .rounded { border-radius: 0.5rem; }
    .rounded-lg { border-radius: 1rem; }
    .border { border-width: 1px; }
    .border-gray-700 { border-color: #3a3a3c; }
    .transition { transition: all 0.2s; }
    .hover\:bg-gray-700:hover { background-color: #2c2c2e; }

    /* Thrd custom classes */
    .bg-thrd { background-color: #1c1c1e; }
    .text-thrd { color: #e5e5ea; }
    .btn-thrd { background-color: #2c2c2e; color: #e5e5ea; padding: 0.5rem 1rem; border-radius: 0.5rem; transition: 0.2s; border: none; }
    .btn-thrd:hover { background-color: #3a3a3c; }
    .btn-thrd-orange { background-color: transparent; color: #ff6f00; border: 2px solid #ff6f00; padding: 0.5rem 1rem; border-radius: 0.5rem; transition: 0.2s; }
    .btn-thrd-orange:hover { background-color: #ff6f00; color: #fff; }
    .card-thrd { background-color: #2c2c2e; border-radius: 1rem; padding: 1.5rem; transition: 0.2s; }
    .card-thrd:hover { background-color: #3a3a3c; }
    .sidebar-link { display: flex; align-items: center; gap: 0.5rem; padding: 0.5rem 1rem; border-radius: 0.75rem; transition: 0.2s; color: #e5e5ea; }
    .sidebar-link:hover { background-color: #2c2c2e; color: #ff6f00; }
    .grid { display: grid; }
    .sm\:grid-cols-2 { grid-template-columns: repeat(2, minmax(0, 1fr)); }
    .lg\:grid-cols-3 { grid-template-columns: repeat(3, minmax(0, 1fr)); }
    .overflow-y-auto { overflow-y: auto; }
    .fixed { position: fixed; }
    .inset-y-0 { top: 0; bottom: 0; }
    .md\:w-64 { width: 16rem; }
    .md\:pl-64 { padding-left: 16rem; }
    .mt-12 { margin-top: 3rem; }
  </style>
</head>
<body class="bg-thrd text-thrd">

<script>
  const SUPABASE_URL = "https://jmxlhugggzvgpuuwvyly.supabase.co";
  const SUPABASE_KEY = "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImpteGxodWdnZ3B2Z3B1dXd2eWx5Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjA4MjA3NTQsImV4cCI6MjA3NjM5Njc1NH0.gDTnN7pSfGGUoXN2XTR8SpMDjJVW-K9KpiO8SAC3e4I";
  const supabase = supabase.createClient(SUPABASE_URL, SUPABASE_KEY);

  async function checkAuth() {
    const { data: { session } } = await supabase.auth.getSession();
    if (!session) window.location.href = "https://thrd.xyz/login";
  }
  checkAuth();
</script>

<!-- Sidebar -->
<div class="md:flex md:flex-col md:fixed md:inset-y-0 md:w-64 bg-thrd border-r border-gray-700">
  <div class="flex-1 flex flex-col min-h-0 p-4 overflow-y-auto">
    <div class="flex items-center mb-6">
      <img src="https://thrd.xyz/logo.png" alt="Thrd Logo" class="h-10 w-auto mr-2">
      <span class="text-xl font-bold">Thrd</span>
    </div>
    <nav class="flex-1 flex flex-col gap-2">
      <a href="./dashboard" class="sidebar-link"><i class="fas fa-tachometer-alt"></i> Dashboard</a>
      <a href="./servers" class="sidebar-link"><i class="fas fa-server"></i> Servers</a>
      <a href="./credentials" class="sidebar-link"><i class="fas fa-key"></i> Credentials</a>
      <button id="logoutBtn" class="mt-6 btn-thrd w-full"><i class="fas fa-sign-out-alt mr-2"></i> Sign Out</button>
    </nav>
  </div>
</div>

<!-- Main content -->
<div class="md:pl-64">
  <main class="min-h-screen p-8">
    <div class="flex justify-between items-center mb-8">
      <div>
        <h1 class="text-3xl font-bold">Servers</h1>
        <p class="text-gray-400">Manage your Discord bots and applications.</p>
      </div>
      <button id="createServerBtn" class="btn-thrd-orange flex items-center gap-2"><i class="fas fa-plus"></i> Create Server</button>
    </div>

    <div id="serverGrid" class="grid gap-6 sm:grid-cols-2 lg:grid-cols-3"></div>

    <div id="noServers" class="mt-8 text-center hidden">
      <p class="text-gray-400 text-lg">No servers available. Create one to get started.</p>
      <button id="createServerBtn2" class="mt-4 btn-thrd-orange flex items-center gap-2"><i class="fas fa-plus"></i> Create Server</button>
    </div>
  </main>

  <footer class="bg-thrd mt-12 p-6 text-center text-gray-400">
    &copy; 2025 Thrd. All rights reserved.
  </footer>
</div>

<script>
  // Demo servers
  const servers = [
    { id: 1, name: "Bot Alpha", status: "Online" },
    { id: 2, name: "Bot Beta", status: "Offline" }
  ];

  function renderServers() {
    const grid = document.getElementById("serverGrid");
    const noServers = document.getElementById("noServers");
    grid.innerHTML = "";

    if (servers.length === 0) {
      noServers.classList.remove("hidden");
      return;
    }
    noServers.classList.add("hidden");

    servers.forEach(s => {
      const card = document.createElement("div");
      card.className = "card-thrd cursor-pointer";
      card.innerHTML = `
        <h3 class="text-xl font-semibold">${s.name}</h3>
        <p class="mt-2 text-gray-400">Status: <span class="${s.status === 'Online' ? 'text-green-400' : 'text-red-400'}">${s.status}</span></p>
        <div class="mt-4 flex justify-end">
          <a href="./servers/${s.id}" class="text-gray-300 hover:underline"><i class="fas fa-external-link-alt"></i> Manage</a>
        </div>
      `;
      grid.appendChild(card);
    });
  }

  document.getElementById("createServerBtn").onclick = () => alert("Create server clicked!");
  document.getElementById("createServerBtn2").onclick = () => alert("Create server clicked!");
  renderServers();

  document.getElementById("logoutBtn").onclick = async () => {
    await supabase.auth.signOut();
    window.location.href = "https://thrd.xyz/login";
  }
</script>
</body>
</html>
