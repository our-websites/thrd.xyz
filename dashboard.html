<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Thrd Hosting Dashboard</title>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css" crossorigin="anonymous" referrerpolicy="no-referrer" />
<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
<style>
* {margin:0;padding:0;box-sizing:border-box;font-family:'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;}
body {background:#111;color:#fff;}
.container {display:flex;min-height:100vh;}
.sidebar {
    width:250px;
    background:#1a1a1a;
    display:flex;
    flex-direction:column;
    padding:20px;
    gap:20px;
}
.sidebar h2 {color:#ffb347;text-align:center;margin-bottom:20px;}
.sidebar .user-card {
    background:#222;
    padding:15px;
    border-radius:15px;
    text-align:center;
}
.sidebar .user-card img {width:60px;height:60px;border-radius:50%;margin-bottom:10px;}
.sidebar input {padding:10px;border-radius:12px;border:none;width:100%;margin-bottom:15px;background:#222;color:#fff;}
.sidebar nav a {
    display:flex;align-items:center;gap:10px;
    padding:12px 15px;border-radius:12px;
    margin-bottom:10px;
    color:#fff;
    transition:background 0.3s ease;
}
.sidebar nav a:hover {background:linear-gradient(90deg,#ff7518,#ffb347);}
.sidebar .signout {margin-top:auto;background:#222;padding:12px;border-radius:12px;text-align:center;cursor:pointer;}
.sidebar .signout:hover {background:linear-gradient(90deg,#ff7518,#ffb347);color:#1a1a1a;}
.main {flex:1;padding:30px;display:flex;flex-direction:column;gap:30px;}
.header {display:flex;justify-content:space-between;align-items:center;}
.header h1 {font-size:2rem;color:#ffb347;}
.resource-grid {
    display:grid;
    grid-template-columns:repeat(auto-fit,minmax(150px,1fr));
    gap:20px;
}
.resource-card {
    background:#222;
    padding:20px;
    border-radius:15px;
    text-align:center;
}
.resource-card h3 {font-size:1rem;color:#ccc;margin-bottom:5px;}
.resource-card p {font-size:1.5rem;font-weight:bold;color:#ff7518;}
.action-grid {
    display:grid;
    grid-template-columns:repeat(auto-fit,minmax(250px,1fr));
    gap:20px;
}
.action-card {
    background:#222;
    padding:20px;
    border-radius:15px;
    transition:transform 0.3s ease,box-shadow 0.3s ease;
    cursor:pointer;
}
.action-card:hover {transform:translateY(-5px);box-shadow:0 10px 25px rgba(255,117,24,0.4);}
.action-card i {margin-right:10px;}
.bot-grid {
    display:grid;
    grid-template-columns:repeat(auto-fit,minmax(250px,1fr));
    gap:20px;
}
.bot-card {
    background:#222;
    padding:20px;
    border-radius:15px;
    cursor:pointer;
    transition:transform 0.3s ease,box-shadow 0.3s ease;
}
.bot-card:hover {transform:translateY(-5px);box-shadow:0 10px 25px rgba(255,117,24,0.4);}
.bot-card h3 {margin-bottom:10px;}
.bot-card .status {color:#28a745;font-weight:bold;}
.create-card {
    display:flex;justify-content:center;align-items:center;
    background:linear-gradient(90deg,#ff7518,#ffb347);
    color:#1a1a1a;font-weight:bold;border-radius:15px;
    height:100px;font-size:1.2rem;cursor:pointer;
}
footer {text-align:center;padding:20px;color:#777;font-size:0.9rem;margin-top:auto;}
</style>
</head>
<body>

<div class="container">
    <aside class="sidebar">
        <h2>Thrd Hosting</h2>
        <div class="user-card" id="userCard">
            <img src="https://via.placeholder.com/60" alt="User Avatar" id="userAvatar">
            <p id="userName">Loading...</p>
            <small id="userPlan">Default plan</small>
        </div>
        <input type="text" placeholder="Search...">
        <nav>
            <a href="#"><i class="fas fa-tachometer-alt"></i> Dashboard</a>
            <a href="#"><i class="fas fa-server"></i> Servers</a>
            <a href="#"><i class="fas fa-key"></i> Credentials</a>
        </nav>
        <div class="signout" id="signOutBtn">Sign out</div>
        <footer>&copy; 2025 Thrd Hosting</footer>
    </aside>
    <main class="main">
        <div class="header">
            <h1>Dashboard</h1>
            <div></div>
        </div>

        <p>You currently have <strong>0 active servers</strong>.</p>

        <h2>Available Resources</h2>
        <div class="resource-grid">
            <div class="resource-card"><h3>CPU Cores</h3><p>0.5</p></div>
            <div class="resource-card"><h3>RAM</h3><p>0.5 GiB</p></div>
            <div class="resource-card"><h3>Storage</h3><p>1 GiB</p></div>
            <div class="resource-card"><h3>Server Slots</h3><p>1</p></div>
        </div>

        <h2>Your Bots</h2>
        <div class="bot-grid">
            <div class="bot-card"><h3>Bot Alpha</h3><p class="status">Online</p></div>
            <div class="bot-card"><h3>Bot Beta</h3><p class="status">Offline</p></div>
            <div class="create-card"><i class="fas fa-plus"></i> Create New Bot</div>
        </div>

        <h2>Actions</h2>
        <div class="action-grid">
            <div class="action-card"><i class="fas fa-cog"></i> Manage Account</div>
            <div class="action-card"><i class="fas fa-lock"></i> Paid Plans</div>
            <div class="action-card"><i class="fas fa-exclamation-triangle"></i> All free slots are full</div>
        </div>
    </main>
</div>

<script>
const supabase = window.supabase.createClient(
  "SUPABASE_URL", // <-- replace this
  "SUPABASE_ANON_KEY" // <-- replace this
);

async function loadUser() {
  const { data, error } = await supabase.auth.getUser();
  if (error || !data.user) {
    window.location.href = '/'; // redirect if not logged in
    return;
  }

  const user = data.user;
  const meta = user.user_metadata;

  // Discord metadata
  const username = meta.full_name || meta.name || meta.preferred_username || "Unknown User";
  const avatarUrl = meta.avatar_url || "https://via.placeholder.com/60";

  document.getElementById("userName").textContent = username;
  document.getElementById("userAvatar").src = avatarUrl;
}

async function signOut() {
  await supabase.auth.signOut();
  window.location.href = '/';
}

document.getElementById("signOutBtn").addEventListener("click", signOut);
loadUser();
</script>

</body>
</html>
