<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Thrd Login</title>
<link rel="icon" type="image/x-icon" href="https://thrd.xyz/favicon.ico">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta property="og:title" content="Thrd Hosting - Login" />
<meta property="og:description" content="Login to Thrd Hosting. Thrd Hosting offers lightning-fast secure and scalable hosting for discord bots." />
<meta property="og:image" content="https://thrd.xyz/logo.png" />
<meta property="og:url" content="https://thrd.xyz/login" />
<meta property="og:type" content="website" />

<script src="https://cdn.tailwindcss.com"></script>


<link rel="preconnect" href="https://fonts.gstatic.com">
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">


<script src="https://kit.fontawesome.com/a076d05399.js" crossorigin="anonymous"></script>

<style>
  body { font-family: 'Inter', sans-serif; }
  .bg-thrd-login { background-color: #0f0f0f; }
  .btn-discord { background-color: #5865F2; color: #fff; transition: 0.2s; border-radius: 0.5rem; padding: 0.75rem 1.5rem; display: flex; align-items: center; gap: 0.5rem; font-weight: 600; }
  .btn-discord:hover { background-color: #4752c4; }
</style>
</head>
<body class="min-h-screen flex flex-col md:flex-row">


<div class="w-full md:w-1/3 flex flex-col justify-center items-center bg-thrd-login p-8">
  <img src="https://thrd.xyz/logo.png" alt="Thrd Logo" class="h-20 w-auto mb-8">
  <h1 class="text-3xl font-bold text-gray-100 mb-4">Login to Thrd</h1>
  <p class="text-gray-300 mb-8 text-center">Use your Discord account to sign in</p>
  <button id="discordLoginBtn" class="btn-discord">
    <i class="fab fa-discord fa-lg"></i> Login with Discord
  </button>
</div>


<div class="hidden md:flex flex-1 bg-cover bg-center justify-center items-center" style="background-image: url('https://thrd.xyz/background.jpg');">
  <h2 class="text-white text-5xl font-bold bg-black/40 p-4 rounded">Welcome to Thrd</h2>
</div>


<script type="module">
  import { createClient } from "https://cdn.skypack.dev/@supabase/supabase-js";

  const { url: SUPABASE_URL, key: SUPABASE_KEY } = await fetch('https://thrd.xyz/supabase.json')
    .then(res => res.json())
    .catch(() => ({ url: '', key: '' }));

  if (!SUPABASE_URL || !SUPABASE_KEY) {
    window.location.href = "https://thrd.xyz/";
    return;
  }

  const supabase = createClient(SUPABASE_URL, SUPABASE_KEY);

  supabase.auth.onAuthStateChange((event, session) => {
    if (session) {
      localStorage.setItem('sb-session', JSON.stringify(session));
      window.location.href = "/dashboard";
    }
  });

  document.getElementById("discordLoginBtn").onclick = async () => {
    const { error } = await supabase.auth.signInWithOAuth({
      provider: 'discord',
      options: { redirectTo: window.location.origin + '/dashboard' }
    });
    if (error) console.error('Error logging in:', error.message);
  };

  async function checkSession() {
    const { data } = await supabase.auth.getSession();
    if (data?.session) window.location.href = "/dashboard";
  }
  checkSession();
</script>
</body>
</html>
